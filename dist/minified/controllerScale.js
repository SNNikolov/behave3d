"use strict";Behave3d.controllerScale=function(a){Behave3d.Controller.call(this,a)};Behave3d.controllerScale.prototype=Object.create(Behave3d.Controller.prototype);Behave3d.controllerScale.prototype.events=["start","half","end","start_back","half_back","end_back","pos0","pos1"];Behave3d.controllerScale.prototype.messages=["start","start_back","start_reverse","start_new","start_new_back","pos0","pos1"];Behave3d.controllerScale.prototype.default_params={duration:1000,init_sx:1,init_sy:1,init_sz:1,sx:1,sy:1,sz:1,half_step:1,spring_acc:0,spring_vdamp:0.92,register_actions:!1,repeat_start_pos:!1,ease_type:"ease",ease_amount:1,ease_mirror:!1};Behave3d.controllerScale.prototype.construct=function(a,b){if(b=="params"){this.stepper=new Behave3d.StepEngine({sx:this.init_sx,sy:this.init_sy,sz:this.init_sz},!1,this,this)}else if(b=="events"){this.setEventHandlers()}};Behave3d.controllerScale.prototype.message=function(a,b){if(this.handleCommonMessage(a,b))return this;b=this.setMessageParams(a,b);this.direction=a=="start"||a=="start_new"||a=="pos1"||a=="start_reverse"&&this.direction!=1?1:-1;var c=a=="pos0"||a=="pos1"?0:this.duration,d=a=="start_new"||a=="start_new_back",e=this.sx-this.stepper.getVar("sx",!0),f=this.sy-this.stepper.getVar("sy",!0),g=this.sz-this.stepper.getVar("sz",!0);this.stepper.start(this.direction,this.repeat_start_pos,d,{sx:e,sy:f,sz:g},c);this.paused=!1;return this};Behave3d.controllerScale.prototype.update=function(){this.stepper.update(this.paused);this.addTransform({type:Behave3d.transforms.scale,sx:this.stepper.getVar("sx"),sy:this.stepper.getVar("sy"),sz:this.stepper.getVar("sz")})};Behave3d.controllerScale.prototype.setEventHandlers=function(){this.registerActions(this.register_actions,{show:"start_back",hide:"start",show_immediately:"pos0",hide_immediately:"pos1"},{show_start:"start_back",show_end:"end_back",hide_start:"start",hide_end:"end"})};Behave3d.registerController("scale",Behave3d.controllerScale);