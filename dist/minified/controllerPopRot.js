"use strict";Behave3d.controllerPopRot=function(a){Behave3d.Controller.call(this,a)};Behave3d.controllerPopRot.prototype=Object.create(Behave3d.Controller.prototype);Behave3d.controllerPopRot.prototype.requires={controllers:["controllerMove","controllerOpacity","controllerRotate"]};Behave3d.controllerPopRot.prototype.messages=["show","show_immediately","hide","hide_immediately"];Behave3d.controllerPopRot.prototype.events=["show_start","show_end","hide_start","hide_end"];Behave3d.controllerPopRot.prototype.default_params={duration:700,rotation:-720,far_z:"-500%",affect:"",register_actions:!1};Behave3d.controllerPopRot.prototype.construct=function(a,b){if(b=="params"){this.controller_move=this.owner.addController(Behave3d.controllerMove,{targets:this.targets,dz:this.far_z});this.controller_vis=this.owner.addController(Behave3d.controllerOpacity,{targets:this.targets,affect:this.affect,ease_type:"ease_out"});this.controller_rot=this.owner.addController(Behave3d.controllerRotate,{targets:this.targets,y:1,angle:this.rotation,ease_type:"linear"});this.is_shown=!0;this.actions_registered=!1}else if(b=="events"){this.setEventHandlers()}};Behave3d.controllerPopRot.prototype.destruct=function(){this.owner.removeController(this.controller_move);this.owner.removeController(this.controller_vis);this.owner.removeController(this.controller_rot)};Behave3d.controllerPopRot.prototype.message=function(a,b){if(this.handleCommonMessage(a,b))return this;b=this.setMessageParams(a,b);var c;if(a=="show"||(c=a=="show_immediately")){if(!this.is_shown){this.is_shown=!0;this.controller_vis.message(c?"show":"fade_in",{duration:this.duration*0.7});this.controller_move.message(c?"pos0":"start_back",{duration:this.duration,ease_type:"ease_out"});this.controller_rot.message("start_back",{duration:c?0:this.duration})}}else if(a=="hide"||(c=a=="hide_immediately")){if(this.is_shown){this.is_shown=!1;this.controller_vis.message(c?"hide":"fade_out",{duration:this.duration});this.controller_move.message(c?"pos1":"start",{duration:this.duration,ease_type:"ease_in"});this.controller_rot.message("start",{duration:c?0:this.duration})}}return this};Behave3d.controllerPopRot.prototype.setEventHandlers=function(){this.setSubcontrollersEvents([this.controller_move,this.controller_vis,this.controller_rot]);this.controller_move.relayEvents(this,{start:"hide_start",end:"hide_end",start_back:"show_start",end_back:"show_end"});this.registerActions(this.register_actions,"showhide","showhide")};Behave3d.registerController("popRot",Behave3d.controllerPopRot);