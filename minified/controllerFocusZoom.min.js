"use strict";Behave3d.controllerFocusZoom=function(s){Behave3d.Controller.call(this,s)},Behave3d.controllerFocusZoom.prototype=Object.create(Behave3d.Controller.prototype),Behave3d.controllerFocusZoom.prototype.events=["focus","blur"],Behave3d.controllerFocusZoom.prototype.messages=["focus","blur"],Behave3d.controllerFocusZoom.prototype.default_params={scale:1.4,dz:30,dx:0,dy:0,target_id:"",speed_dampening:.72,speed_acc:.1},Behave3d.controllerFocusZoom.prototype.construct=function(s,t){"params"==t?(this.is_focused=!1,this.current_pos=0,this.vpos=0,""!=this.target_id&&(this.targets=[this.owner.getDOMElement(this.target_id)]),this.makeTargetsDom3d(!0)):"events"==t&&this.set("focus on: @targets a focus_capture, blur on: @targets a blur_capture")},Behave3d.controllerFocusZoom.prototype.message=function(s,t){return this.handleCommonMessage(s,t)?this:(t=this.setMessageParams(s,t),"focus"==s?this.is_focused||(this.is_focused=!0,this.fireEvent("focus")):"blur"==s&&this.is_focused&&(this.is_focused=!1,this.fireEvent("blur")),this)},Behave3d.controllerFocusZoom.prototype.update=function(){(this.paramsHaveChanged()||!this.computed_params)&&(this.computed_params=this.getComputedLengths(["dx"],["dy"],["dz"])),this.is_focused?this.vpos+=(1-this.current_pos)*this.speed_acc:this.vpos-=this.current_pos*this.speed_acc,this.vpos=this.vpos*this.speed_dampening,this.paused||(this.current_pos+=this.vpos);var s=1+this.current_pos*(this.scale-1),t=Math.max(0,this.current_pos*this.computed_params.dz),e=this.current_pos*this.computed_params.dx,o=this.current_pos*this.computed_params.dy;this.addTransform({type:Behave3d.transforms.translate,dx:e,dy:o,dz:t}),this.addTransform({type:Behave3d.transforms.scale,sx:s,sy:s,sz:1})},Behave3d.registerController("focusZoom",Behave3d.controllerFocusZoom);