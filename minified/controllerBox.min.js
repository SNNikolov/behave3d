"use strict";Behave3d.controllerBox=function(e){Behave3d.Controller.call(this,e)},Behave3d.controllerBox.prototype=Object.create(Behave3d.Controller.prototype),Behave3d.controllerBox.prototype.messages=["update"],Behave3d.controllerBox.prototype.events=[],Behave3d.controllerBox.prototype.default_params={x_size:"100%o",y_size:"100%o",z_size:"30%oX"},Behave3d.controllerBox.prototype.sides_orientation=[{rx:0,ry:0},{rx:2,ry:0},{rx:0,ry:1},{rx:0,ry:-1},{rx:1,ry:0},{rx:-1,ry:0}],Behave3d.controllerBox.prototype.construct=function(e,t){"params"==t&&this.setSides()},Behave3d.controllerBox.prototype.message=function(e,t){return this.handleCommonMessage(e,t)?this:(t=this.setMessageParams(e,t),"update"==e&&this.setSides(),this)},Behave3d.controllerBox.prototype.update=function(){if(6==this.targets.length){this.paramsHaveChanged()&&this.setSides();for(var e=0;6>e;e++){this.addTransform({type:Behave3d.transforms.rotate,rx:this.sides_orientation[e].rx&&this.sides_orientation[e].rx/this.sides_orientation[e].rx,ry:this.sides_orientation[e].ry&&this.sides_orientation[e].ry/this.sides_orientation[e].ry,rz:0,ra:.25*(this.sides_orientation[e].rx+this.sides_orientation[e].ry)*Behave3d.consts.ROTATE_ONE_TURN},e);var t;t=0==e?this.computed_params.z_size/2:1==e?this.computed_params.z_size/2:2==e?-this.computed_params.z_size/2:3==e?-this.computed_params.x_size+this.computed_params.z_size/2:4==e?this.computed_params.z_size/2:this.computed_params.y_size-this.computed_params.z_size/2,this.addTransform({type:Behave3d.transforms.translate,dx:0,dy:0,dz:t},e)}}},Behave3d.controllerBox.prototype.setSides=function(){this.setChildTargets(6),this.targets.length<6&&Behave3d.debugExit("controllerBox requires 6 child HTML elements which will become the sides of the box"),this.computed_params=this.getComputedLengths(["x_size"],["y_size"],["z_size"]);for(var e=0;6>e;e++)this.targets[e].style.position="absolute",0==e||1==e?(this.targets[e].style.width=this.computed_params.x_size+"px",this.targets[e].style.height=this.computed_params.y_size+"px"):2==e||3==e?(this.targets[e].style.width=this.computed_params.z_size+"px",this.targets[e].style.height=this.computed_params.y_size+"px"):(this.targets[e].style.width=this.computed_params.x_size+"px",this.targets[e].style.height=this.computed_params.z_size+"px");this.owner.element.style.width=this.computed_params.x_size+"px",this.owner.element.style.height=this.computed_params.y_size+"px"},Behave3d.registerController("box",Behave3d.controllerBox);