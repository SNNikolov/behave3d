"use strict";Behave3d.controllerScale=function(e){Behave3d.Controller.call(this,e)},Behave3d.controllerScale.prototype=Object.create(Behave3d.Controller.prototype),Behave3d.controllerScale.prototype.events=["start","half","end","start_back","half_back","end_back","pos0","pos1"],Behave3d.controllerScale.prototype.messages=["start","start_back","start_reverse","start_new","start_new_back","pos0","pos1"],Behave3d.controllerScale.prototype.default_params={duration:1e3,init_sx:1,init_sy:1,init_sz:1,sx:1,sy:1,sz:1,half_step:1,spring_acc:0,spring_vdamp:.92,register_actions:!1,repeat_start_pos:!1,ease_type:"ease",ease_amount:1,ease_mirror:!1},Behave3d.controllerScale.prototype.construct=function(e,t){"params"==t?this.stepper=new Behave3d.StepEngine({sx:this.init_sx,sy:this.init_sy,sz:this.init_sz},!1,this,this):"events"==t&&this.setEventHandlers()},Behave3d.controllerScale.prototype.message=function(e,t){if(this.handleCommonMessage(e,t))return this;t=this.setMessageParams(e,t),this.direction="start"==e||"start_new"==e||"pos1"==e||"start_reverse"==e&&1!=this.direction?1:-1;var s="pos0"==e||"pos1"==e?0:this.duration,r="start_new"==e||"start_new_back"==e,a=this.sx-this.stepper.getVar("sx",!0),i=this.sy-this.stepper.getVar("sy",!0),o=this.sz-this.stepper.getVar("sz",!0);return this.stepper.start(this.direction,this.repeat_start_pos,r,{sx:a,sy:i,sz:o},s),this.paused=!1,this},Behave3d.controllerScale.prototype.update=function(){this.stepper.update(this.paused),this.addTransform({type:Behave3d.transforms.scale,sx:this.stepper.getVar("sx"),sy:this.stepper.getVar("sy"),sz:this.stepper.getVar("sz")})},Behave3d.controllerScale.prototype.setEventHandlers=function(){this.registerActions(this.register_actions,{show:"start_back",hide:"start",show_immediately:"pos0",hide_immediately:"pos1"},{show_start:"start_back",show_end:"end_back",hide_start:"start",hide_end:"end"})},Behave3d.registerController("scale",Behave3d.controllerScale);