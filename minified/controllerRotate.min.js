"use strict";Behave3d.controllerRotate=function(t){Behave3d.Controller.call(this,t)},Behave3d.controllerRotate.prototype=Object.create(Behave3d.Controller.prototype),Behave3d.controllerRotate.prototype.events=["start","half","end","cycle","mark","start_back","half_back","end_back","cycle_back","mark_back","pos0","pos1"],Behave3d.controllerRotate.prototype.messages=["start","start_back","start_reverse","start_new","start_new_back","pos0","pos1"],Behave3d.controllerRotate.prototype.default_params={duration:1e3,init_angle:0,angle:0,x:0,y:0,z:0,marked_angle:-1,half_step:1,spring_acc:0,spring_vdamp:.92,register_actions:!1,repeat_start_pos:!1,ease_type:"ease",ease_amount:1,ease_mirror:!1},Behave3d.controllerRotate.prototype.construct=function(t,e){"params"==e?this.stepper=new Behave3d.StepEngine({angle:this.init_angle},!0,this,this):"events"==e&&this.setEventHandlers()},Behave3d.controllerRotate.prototype.message=function(t,e){if(this.handleCommonMessage(t,e))return this;e=this.setMessageParams(t,e),this.direction="start"==t||"start_new"==t||"pos1"==t||"start_reverse"==t&&1!=this.direction?1:-1;var a="pos0"==t||"pos1"==t?0:this.duration,r="start_new"==t||"start_new_back"==t;return this.stepper.start(this.direction,this.repeat_start_pos,r,{angle:this.angle},a),this.paused=!1,this},Behave3d.controllerRotate.prototype.update=function(){this.stepper.update(this.paused),this.addTransform({type:Behave3d.transforms.rotate,rx:this.x,ry:this.y,rz:this.z,ra:this.stepper.getVar("angle")})},Behave3d.controllerRotate.prototype.setEventHandlers=function(){this.registerActions(this.register_actions,{show:"start_back",hide:"start",show_immediately:"pos0",hide_immediately:"pos1"},{show_start:"start_back",show_end:"end_back",hide_start:"start",hide_end:"end"})},Behave3d.registerController("rotate",Behave3d.controllerRotate);